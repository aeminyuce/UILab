// out: false
/* image uploader */ @import (reference) 'ui.less';

@image-uploader-padding:                      10px;

@image-uploader-drop-opacity:                 .15;
@image-uploader-drop-bg:                      hsl(0, 0%, 93%);
@image-uploader-drop-bg-dark:                 hsl(222, 13%, 15%);

@image-uploader-list-min-height:              220px;
@image-uploader-list-bg:                      fade(@white, 45%);
@image-uploader-list-bg-dark:                 fade(@white, 3.5%);

@image-uploader-list-border-style:            dashed;
@image-uploader-list-border-size:             2px;
@image-uploader-list-border:                  fade(@black, 15%);
@image-uploader-list-border-dark:             fade(@white, 15%);

@image-uploader-list-tag-font-size:           (@font-size - 1);
@image-uploader-list-tag-padding:             1px 6px;
@image-uploader-list-tag-radius:              20px;
@image-uploader-list-tag-color:               @black-50;
@image-uploader-list-tag-color-dark:          hsl(0, 0%, 73%);
@image-uploader-list-tag-bg:                  fade(@black, 8%);
@image-uploader-list-tag-bg-dark:             fade(@white, 8%);

@image-uploader-list-name-min-height:         22px;

@image-uploader-list-img-min-height:          164px;
@image-uploader-list-img-min-height-xs:       98px;

@image-uploader-list-img-shadow-size:         1px 6px;
@image-uploader-list-img-shadow:              fade(@black, 25%);
@image-uploader-list-img-hover-shadow-size:   5px 15px;
@image-uploader-list-img-hover-shadow:        fade(@black, 20%);
@image-uploader-list-img-hover-scale:         1.05;

@image-uploader-list-info-color:              hsl(0, 0%, 49%);
@image-uploader-list-info-padding:            1px 6px 1px 0;

@image-uploader-loading-stripe-size:          20px;
@image-uploader-loading-bg:                   linear-gradient(45deg, @no-color 25%, fade(@white, 25%) 25%, fade(@white, 25%) 50%, @no-color 50%, @no-color 75%, fade(@white, 25%) 75%);

._global-vars () {
    --ui-image-uploader-drop-bg: @image-uploader-drop-bg;

    --ui-image-uploader-list-bg: @image-uploader-list-bg;
    --ui-image-uploader-list-border: @image-uploader-list-border;

    --ui-image-uploader-list-tag-color: @image-uploader-list-tag-color;
    --ui-image-uploader-list-tag-bg: @image-uploader-list-tag-bg;
}
._global-vars-dark () {
    --ui-image-uploader-drop-bg: @image-uploader-drop-bg-dark;

    --ui-image-uploader-list-bg: @image-uploader-list-bg-dark;
    --ui-image-uploader-list-border: @image-uploader-list-border-dark;

    --ui-image-uploader-list-tag-color: @image-uploader-list-tag-color-dark;
    --ui-image-uploader-list-tag-bg: @image-uploader-list-tag-bg-dark;
}

@keyframes ui-uploader-loader {
    from { background-position: (@image-uploader-loading-stripe-size * 2) 0; }
    to { background-position: 0 0; }
}

.ui-ease-image-uploader {
    transition-property: background-color; transition-duration: @ease-default;

    .uploader-list {
        transition-property: margin; transition-duration: @ease-default;

        & > .icon { transition-property: opacity; transition-duration: @ease-default; }
        li {
            transition-property: opacity; transition-duration: (@ease-default * 2);

            img { transition-property: transform, box-shadow; transition-duration: @ease-default; }
        }
    }
}

.image-uploader {
    ._bg-var(card-bg); overflow: hidden; position: relative;

    &.loading,&.uploading {
        .file .btn,[type="submit"] { background-image: @image-uploader-loading-bg; background-size: @image-uploader-loading-stripe-size @image-uploader-loading-stripe-size; animation: ui-uploader-loader 1s linear infinite; }
    }

    &.drop-highlight {
        ._bg-var(image-uploader-drop-bg);

        .uploader-list {
            &:extend(.image-uploader .uploader-list:not(.open));

            & > .icon { display: block; }
            li { opacity: @image-uploader-drop-opacity; }
        }
    }

    .uploader-list {
        min-height: @image-uploader-list-min-height; position: relative;

        & > .icon { position: absolute; top: 50%; left: 50%; z-index: 1; transform: translate(-50%, -50%); }
        &.open > .icon { display: none; }

        ul {
            list-style: none; padding: (@image-uploader-padding / 2); margin: 0; display: flex; flex-wrap: wrap;

           li {
                padding: (@image-uploader-padding / 2);

                &.open-ease { opacity: 0; }
                .img {
                    display: block; clear: both; position: relative;

                    img {
                        width: auto; max-width: 100%; height: auto; max-height: 100%; position: absolute; top: 50%; left: 50%; box-shadow: 0 @image-uploader-list-img-shadow-size @image-uploader-list-img-shadow; transform: translate(-50%,-50%);

                        .ui-desktop &:hover { transform: translate(-50%,-50%) scale(@image-uploader-list-img-hover-scale); box-shadow: 0 @image-uploader-list-img-hover-shadow-size @image-uploader-list-img-hover-shadow; cursor: pointer; }
                    }

                    &:not(:first-child) { margin-top: @image-uploader-padding; }
                    &:not(:last-child) { margin-bottom: @image-uploader-padding; }
                }

                .name { white-space: nowrap; text-overflow: ellipsis; line-height: @image-uploader-list-name-min-height; min-height: @image-uploader-list-name-min-height; overflow: hidden; display: block; }

                .info,.tag { vertical-align: middle; display: inline-block; }
                .info { color: @image-uploader-list-info-color; padding: @image-uploader-list-info-padding; }
                .tag { ._color-var(image-uploader-list-tag-color); font-size: @image-uploader-list-tag-font-size; white-space: nowrap; padding: @image-uploader-list-tag-padding; ._bg-var(image-uploader-list-tag-bg); border-radius: @image-uploader-list-tag-radius; }
            }
        }

        &:not(.open) {
            ._bg-var(image-uploader-list-bg); margin: @image-uploader-padding; ._border-var(@style: @image-uploader-list-border-style; @width: @image-uploader-list-border-size; @var: image-uploader-list-border); border-radius: @round;

            li { display: none; }
        }
    }
}

@media (@default-start) {
    .uploader-list {
        li { width: 20%; }
    }
}
@media (@md-finish) {
    .uploader-list {
        li { width: 25%; }
    }
}
@media (@sm-finish) {
    .uploader-list {
        li { width: 33.333332%; }
    }
}
@media (@sm-start) {
    .uploader-list {
        li {
            .img { min-height: @image-uploader-list-img-min-height; }
        }
    }
}
@media (@xs-finish) {
    .uploader-list {
        li {
            .img { min-height: @image-uploader-list-img-min-height-xs; }
        }
    }
}
@media (max-width: (@layout-min + 60)) {
    .uploader-list {
        li { width: 50%; }
    }
}
