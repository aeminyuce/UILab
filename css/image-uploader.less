// out: false
/* image uploader */ @import '_settings.less';

@image-uploader-padding:                      10px;
@image-uploader-add-btn-size:                 @btn-lg;

@image-uploader-drop-opacity:                 .15;
@image-uploader-drop-bg:                      hsl(0, 0%, 93%);
@image-uploader-drop-bg-dark:                 hsl(222, 13%, 15%);

@image-uploader-tools-bg:                     fade(@black, 5%);
@image-uploader-tools-bg-dark:                fade(@white, 3.5%);

@image-uploader-list-min-height:              220px;
@image-uploader-list-bg:                      fade(@white, 45%);
@image-uploader-list-bg-dark:                 fade(@white, 3.5%);

@image-uploader-list-border-style:            dashed;
@image-uploader-list-border-size:             2px;
@image-uploader-list-border:                  fade(@black, 15%);
@image-uploader-list-border-dark:             fade(@white, 15%);

@image-uploader-list-tag-font-size:           (@font-size - 1);
@image-uploader-list-tag-padding:             1px 6px;
@image-uploader-list-tag-radius:              20px;
@image-uploader-list-tag-color:               @black-50;
@image-uploader-list-tag-color-dark:          hsl(0, 0%, 73%);
@image-uploader-list-tag-bg:                  fade(@black, 8%);
@image-uploader-list-tag-bg-dark:             fade(@white, 8%);

@image-uploader-list-name-min-height:         22px;

@image-uploader-list-img-min-height:          164px;
@image-uploader-list-img-min-height-xs:       98px;

@image-uploader-list-img-shadow-size:         1px 6px;
@image-uploader-list-img-shadow:              fade(@black, 25%);
@image-uploader-list-img-hover-shadow-size:   5px 15px;
@image-uploader-list-img-hover-shadow:        fade(@black, 20%);
@image-uploader-list-img-hover-scale:         1.05;

@image-uploader-list-info-color:              hsl(0, 0%, 49%);
@image-uploader-list-info-padding:            1px 6px 1px 0;

@image-uploader-loading-stripe-size:          20px;
@image-uploader-loading-bg:                   linear-gradient(45deg, @no-color 25%, fade(@white, 25%) 25%, fade(@white, 25%) 50%, @no-color 50%, @no-color 75%, fade(@white, 25%) 75%);

._global-vars () {
    --image-uploader-drop-bg: @image-uploader-drop-bg;
    --image-uploader-tools-bg: @image-uploader-tools-bg;

    --image-uploader-list-bg: @image-uploader-list-bg;
    --image-uploader-list-border: @image-uploader-list-border;

    --image-uploader-list-tag-color: @image-uploader-list-tag-color;
    --image-uploader-list-tag-bg: @image-uploader-list-tag-bg;
}
._global-vars-dark () {
    --image-uploader-drop-bg: @image-uploader-drop-bg-dark;
    --image-uploader-tools-bg: @image-uploader-tools-bg-dark;

    --image-uploader-list-bg: @image-uploader-list-bg-dark;
    --image-uploader-list-border: @image-uploader-list-border-dark;

    --image-uploader-list-tag-color: @image-uploader-list-tag-color-dark;
    --image-uploader-list-tag-bg: @image-uploader-list-tag-bg-dark;
}

@keyframes uploader-loader {
    from { background-position: (@image-uploader-loading-stripe-size * 2) 0; }
    to { background-position: 0 0; }
}

.ease-image-uploader {
    transition-property: background-color; transition-duration: @ease-default;

    .uploader-list {
        transition-property: margin; transition-duration: @ease-default;

        & > .icon { transition-property: opacity; transition-duration: @ease-default; }
        ul {
            & > li {
                transition-property: opacity; transition-duration: (@ease-default * 2);

                img { transition-property: transform, box-shadow; transition-duration: @ease-default; }
            }
        }
    }

    .uploader-tools { &:extend(.ease-image-uploader .uploader-list ul > li); }
}

.image-uploader {
    ._bg-var(card-bg); overflow: hidden; position: relative;

    .uploader-panel {
        text-align: right; min-height: (@image-uploader-add-btn-size + @image-uploader-padding); padding: (@image-uploader-padding / 2) @image-uploader-padding;

        & > .row { margin-left: 0; margin-right: 0; }
        h3,h4,h5,h6 { font-size: @x-large; line-height: @image-uploader-add-btn-size; margin-bottom: 0; float: left; }
    }

    &.loading,&.uploading {
        .file,.uploader-upload { background-image: @image-uploader-loading-bg; background-size: @image-uploader-loading-stripe-size @image-uploader-loading-stripe-size; animation: uploader-loader 1s linear infinite; }
    }

    .file {
        float: right;

        .btn {
            b { font-weight: @font-normal; }
        }
    }

    .uploader-tools {
        ._bg-var(image-uploader-tools-bg); padding: (@image-uploader-padding / 2) @image-uploader-padding;

        &:not(.open) { display: none; }
        &:not(.open-ease) { opacity: 0; }
    }

    &.drop-highlight {
        ._bg-var(image-uploader-drop-bg);

        .uploader-tools { opacity: @image-uploader-drop-opacity; }
        .uploader-list {
            &:extend(.image-uploader .uploader-list:not(.open));

            & > .icon { display: block; }
            ul {
                & > li { opacity: @image-uploader-drop-opacity; }
            }
        }
    }

    .uploader-list {
        min-height: @image-uploader-list-min-height; position: relative;

        & > .icon { position: absolute; top: 50%; left: 50%; z-index: 1; transform: translate(-50%, -50%); }
        &.open > .icon { display: none; }

        ul {
            list-style: none; padding: (@image-uploader-padding / 2); margin: 0; display: flex; flex-wrap: wrap;

            & > li {
                padding: (@image-uploader-padding / 2);

                &.open-ease { opacity: 0; }
                .img {
                    display: block; clear: both; position: relative;

                    img {
                        width: auto; max-width: 100%; height: auto; max-height: 100%; position: absolute; top: 50%; left: 50%; box-shadow: 0 @image-uploader-list-img-shadow-size @image-uploader-list-img-shadow; transform: translate(-50%,-50%);

                        .desktop &:hover { transform: translate(-50%,-50%) scale(@image-uploader-list-img-hover-scale); box-shadow: 0 @image-uploader-list-img-hover-shadow-size @image-uploader-list-img-hover-shadow; cursor: pointer; }
                    }

                    &:not(:first-child) { margin-top: @image-uploader-padding; }
                    &:not(:last-child) { margin-bottom: @image-uploader-padding; }
                }

                .name { white-space: nowrap; text-overflow: ellipsis; line-height: @image-uploader-list-name-min-height; min-height: @image-uploader-list-name-min-height; overflow: hidden; display: block; }

                .info,.tag { vertical-align: middle; display: inline-block; }
                .info { color: @image-uploader-list-info-color; padding: @image-uploader-list-info-padding; }
                .tag { ._color-var(image-uploader-list-tag-color); font-size: @image-uploader-list-tag-font-size; white-space: nowrap; padding: @image-uploader-list-tag-padding; ._bg-var(image-uploader-list-tag-bg); border-radius: @image-uploader-list-tag-radius; }
            }
        }

        &:not(.open) {
            ._bg-var(image-uploader-list-bg); margin: (@image-uploader-padding / 2) @image-uploader-padding @image-uploader-padding @image-uploader-padding; ._border-var(@style: @image-uploader-list-border-style; @width: @image-uploader-list-border-size; @var: image-uploader-list-border); border-radius: @round;

            ul {
                & > li { display: none; }
            }
        }
    }
}

@media (@default-start) {
    .uploader-list {
        ul > li { width: 20%; }
    }
}
@media (@md-finish) {
    .uploader-list {
        ul > li { width: 25%; }
    }
}
@media (@sm-finish) {
    .uploader-list {
        ul > li { width: 33.333332%; }
    }
}
@media (@sm-start) {
    .uploader-list {
        ul > li {
            .img { min-height: @image-uploader-list-img-min-height; }
        }
    }
}
@media (@xs-finish) {
    .uploader-list {
        ul > li {
            .img { min-height: @image-uploader-list-img-min-height-xs; }
        }
    }
}
@media (max-width: (@layout-min + 60)) {
    .uploader-list {
        ul > li { width: 50%; }
    }
}
